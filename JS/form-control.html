<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    
    <h1>Registration Form</h1>
    <form>
        <div id="alert-message">
        </div>
        <div class="form-data">
            <label for="name">Username</label>
            <input id="name" type="text" placeholder="Username">
            <p>
                <em>
                    <small id="name-error"></small>
                </em>
            </p>
        </div>
        <div class="form-data">
            <label for="pass">Password</label>
            <input id="pass" type="password" placeholder="Password">
            <p>
                <em>
                    <small id="pass-error"></small>
                </em>
            </p>
        </div>
        <div class="form-data">
            <button id="submit" type="submit">Submit</button>
            <button id="reset" type="reset">Reset</button>
        </div>
    </form>
    <script>
        // FIRST STEP is to get the elements from the DOM
        // RU: ПЕРВЫЙ ШАГ - получить элементы из DOM
        const form = document.querySelector('form');
        const name = document.querySelector('#name');
        const pass = document.querySelector('#pass');
        const submitBtn = document.querySelector('form #submit')
        const resetBtn = document.querySelector('form #reset')
        const alertMsg = document.querySelector('#alert-message')
        const nameError = document.querySelector('#name-error')
        const passError = document.querySelector('#pass-error')

        const namePattern = /^[a-zA-Z0-9]{6,12}$/
        const passPattern = /^[a-zA-Z0-9]{8,}$/

        const dangerColor = '#ff5f6d80'
        const successColor = '#00b09b80'
        // =========================================================
        // SECOND STEP - ВТОРОЙ ШАГ
        // PREPARE FUNCTIONs that are going to be used in the dom events
        // RU: ПОДГОТОВИТЬ ФУНКЦИИ, которые будут использоваться в событиях dom
        function submit(e) {
            e.preventDefault()
            if (name.value === '' || pass.value === '') {
                console.log('Empty fields')
                showAlert('empty')
                return false
            }
            if (validate()) {
                console.log('Success')
                showAlert('success')
            } else {
                console.log('Error happened')
                showAlert('error')
            }
        }
        function showAlert(type) {
            alertMsg.style.display = 'block'
            switch (type) {
                case 'success':
                    alertMsg.textContent = "Successfully registered"
                    alertMsg.style.color = 'greenyellow'
                    alertMsg.style.backgroundColor = "#333"
                    break;
                case 'error':
                    alertMsg.textContent = "Ooops... Error happened"
                    alertMsg.style.color = 'snow'
                    alertMsg.style.backgroundColor = "#ff7f50"
                    break;
                case 'empty':
                    alertMsg.textContent = "Please fill in all the fields"
                    alertMsg.style.color = 'snow'
                    alertMsg.style.backgroundColor = "#ff7f50"
                    break;
                default:
                    alertMsg.style.display = 'none'
                    throw new Error('Invalid type')
            }
            setTimeout(() => {
                alertMsg.style.display = 'none'
            }, 5000)
        }
        function validate() {
            let nameHasError = false
            let passHasError = false

            if (namePattern.test(name.value)) {
                nameError.textContent = ''
                name.style.outline = `2px solid ${successColor}`
            } else {
                nameError.textContent = 'Only one word without symbols. Length 6-12'
                name.style.outline = `2px solid ${dangerColor}`
                nameHasError = true
            }

            if (passPattern.test(pass.value)) {
                pass.style.outline = `2px solid ${successColor}`
                passError.textContent = ''
            } else {
                passError.textContent = 'Only one word without symbols. Length 8<'
                pass.style.outline = `2px solid ${dangerColor}`
                passHasError = true
            }

            if (nameHasError || passHasError) {
                form.style.outline = `2px solid ${dangerColor}`
                return false
            } else {
                form.style.outline = `2px solid ${successColor}`
                return true
            }
        }
        function reset(e) {
            e.preventDefault()
            name.value = ''
            pass.value = ''
            nameError.textContent = ''
            passError.textContent = ''
            name.style.outline = '1px solid silver'
            pass.style.outline = '1px solid silver'
            form.style.outline = '1px solid silver'
            alertMsg.style.display = 'none'
        }
        // =========================================================
        // THIRD STEP - ТРЕТИЙ ШАГ
        // ADD EVENT LISTENERS to the buttons
        // RU: ДОБАВИТЬ СЛУШАТЕЛИ СОБЫТИЙ к кнопкам
        resetBtn.addEventListener('click', reset)
        submitBtn.addEventListener('click', submit)

        // =========================================================
        // FOURTH STEP - ЧЕТВЕРТЫЙ ШАГ
        // CREATE IMMEDIATE FEEDBACK for the user
        // RU: СОЗДАТЬ НЕМЕДЛЕННУЮ ОБРАТНУЮ СВЯЗЬ для пользователя
        // -----------------------------------------------------------
        // PASSWORD CHECK---------------------------------------------
        let passCheckStarted = false
        pass.addEventListener('keyup', () => {
            if (pass.value.length > 8) {
                // Start checking after first 8 characters
                passCheckStarted = true
            }
            if (passCheckStarted) {
                if (pass.value.length > 8) {
                    // Check if the password is more than 8 characters
                    if (passPattern.test(pass.value)) {
                        passError.textContent = ''
                        pass.style.outline = `2px solid ${successColor}`
                    } else {
                        passError.textContent = 'Only one word without symbols. Length 8<'
                        pass.style.outline = `2px solid ${dangerColor}`
                    }
                } else {
                    passError.textContent = 'Password must be more than 8 characters'
                    pass.style.outline = `2px solid ${dangerColor}`
                }
            }
        })

        // -----------------------------------------------------------
        // NAME CHECK-------------------------------------------------
        let nameCheckStarted = false
        name.addEventListener('keyup', () => {
            if (name.value.length > 6) {
                // Start checking after first 6 characters
                nameCheckStarted = true
            }
            if (nameCheckStarted) {
                if (name.value.length > 6) {
                    // Check if the name is more than 6 characters
                    if (namePattern.test(name.value)) {
                        nameError.textContent = ''
                        name.style.outline = `2px solid ${successColor}`
                    } else {
                        nameError.textContent = 'Only one word without symbols. Length 6-12'
                        name.style.outline = `2px solid ${dangerColor}`
                    }
                } else {
                    nameError.textContent = 'Name must be more than 6 characters'
                    name.style.outline = `2px solid ${dangerColor}`
                }
            }
        })
    </script>

</body>
<style>
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        transition: 0.3s;
    }
    body {
        background-color: #eee;
    }
    form {
        width: 50%;
        margin: 20px auto;
        padding: 20px;
        background-color: #DBE3FF;
        border-radius: 10px;
    }
    button, input {
        outline: none;
        border: none;
        padding: 10px 20px;
        border-radius: 10px;
        display: block;
        width: 100%;
        background-color: #FFFFFF;
    }
    form * { margin: 5px 0; }
    form .form-data { margin: 10px 0; }

    h1 { text-align: center; }

    form input:focus {
        background-color: snow;
    }
    form button:hover {
        background-color: green;
        cursor: pointer;
        color: snow;
    }
    form p { text-align: center; }

    #name-error,
    #pass-error {
        color: red;
    }
    #submit { background: linear-gradient(to right, #96c93d30, #00b09b, #96c93d30);  color:snow; }
    #submit:hover { background: linear-gradient(to right, #96c93d, #00b09b, #96c93d); }

    #reset { background: linear-gradient(to right, #ffc37130, #ff5f6d, #ffc37130);   color:snow; }
    #reset:hover { background: linear-gradient(to right, #ffc371, #ff5f6d, #ffc371); }

    #alert-message {
        font-size: italic;
        padding: 10px 20px;
        border-radius: 10px;
    }

    @media (max-width: 450px) {
        form { width: 90%; }
    }
</style>
</html>